<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Leaflet Test</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
		<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdn.rawgit.com/mejackreed/Leaflet-IIIF/v2.0.1/leaflet-iiif.js"></script>
		<style type="text/css">
			#mapid {
				height: 90vh;
				width: 90vw;
			}
			/*path {
				opacity: 0;
			}*/
		</style>
	</head>
	<body>
		<div id="mapid"></div>
		<script type="text/javascript" src="pages.js"></script>
		<script type="text/javascript">
			var map = new L.Map("mapid", {
				center: [0, 0],
				crs: L.CRS.Simple,
				zoom: 0
			});
			var mapTiles = L.tileLayer.iiif('http://tile.loc.gov/image-services/iiif/service:gmd:gmd411m:g4114m:g4114dm:g03985189701:03985_01_1897-0000/info.json');
			mapTiles.addTo(map);
			/*function onMapClick(e) {
				alert(e.latlng.lng+","+e.latlng.lat);
			}
			map.on('click', onMapClick);*/
			function onClick(e) {
				var mapTiles = L.tileLayer.iiif('http://tile.loc.gov/image-services/iiif/service:gmd:gmd411m:g4114m:g4114dm:g03985189701:03985_01_1897-'+e.target.feature.properties.page+'/info.json');
				mapTiles.addTo(map);
				linkLayer.remove();
			}
			function onEachFeature(feature,layer) {
				layer.on({
					click: onClick
				})
			}
			var linkLayer = L.geoJSON(clickRegions,{
				onEachFeature: onEachFeature
			});
			linkLayer.addTo(map);
		</script>
	</body>
</html>